var arabam;!function(e){var r=function(){function e(e,r,t){this.$q=e,this.$window=r,this.HttpHelperService=t,this.viewDictionary=["List","Detailed","Box"],this.rangeFacetDictionary=["price","km","year"],this.isMobile=window.configuration.IsMobile}return e.prototype.searchAndGetHtml=function(e){var r=this.$q.defer();return this.HttpHelperService.httpGet(e,function(e){r.resolve(e)},function(){r.reject()},{isNotLoading:!!this.isMobile}),r.promise},e.prototype.prepareSearchUrl=function(e){var r=this,t=this.createQueryBaseBootstrap(this.$window.location.pathname),i=t.base,n=t.isFirmPage,o=e.filter(function(e){return e.Value&&"category"===e.PropertyName}),a=o?o.length:0,c=this.processCategoryFilter(o,n),s=c.path,u=c.querystring;e=this.clearRangeFacets(e);var p=this.checkMinAndMax(e),l=p.minPriceExists,y=p.maxPriceExists;return e.filter(function(e){return"category"!=e.PropertyName}).map(function(e){return"redirectAdvertId"===e.PropertyName||e.IsDynamic&&0==a||"currency"===e.PropertyName&&!l&&!y||("view"==e.PropertyName?u+="&"+e.PropertyName+"="+r.viewDictionary[+e.Value]:"tag"==e.PropertyName||"swap"==e.PropertyName||"koltuksayisi"==e.PropertyName?u+="&"+e.PropertyName+"="+encodeURIComponent(e.Value):u+="&"+e.PropertyName+"="+e.Value),e}),i+s+"?"+(u+=this.processSortFilter(u))},e.prototype.calculateHowManyOfTheSameFacet=function(e,r){return e.filter(function(e){return e.PropertyName===r}).length},e.prototype.clearRangeFacets=function(r){var t=this;return this.rangeFacetDictionary.map(function(e){r=t.clearCheckboxValuesOfSingleRangeFacet(r,e)}),r},e.prototype.clearCheckboxValuesOfSingleRangeFacet=function(e,r){var t=e.filter(function(e){return(e.PropertyName.toLowerCase()=="min"+r||e.PropertyName.toLowerCase()=="max"+r)&&e.Modified});t&&0<t.length&&(e=e.filter(function(e){return e.PropertyName!=r}));var i=e.filter(function(e){return e.PropertyName.toLowerCase()==r&&e.Modified});return i&&0<i.length&&(e=e.filter(function(e){return!(e.PropertyName.toLowerCase()=="min"+r||e.PropertyName.toLowerCase()=="max"+r)})),e},e.prototype.sortFilters=function(e){return e.sort(function(e,r){var t=e.PropertyName.toLowerCase(),i=r.PropertyName.toLowerCase();return i<t?1:t<i?-1:0})},e.prototype.createPrettyUrl=function(e){return e.map(function(e){return e.Text}).join("-")},e.prototype.createQueryBaseBootstrap=function(e){return-1<e.indexOf("ikinci-el/")?{base:"/ikinci-el",isFirmPage:!1}:-1<e.indexOf("sifir-km/")?{base:"/sifir-km",isFirmPage:!1}:{base:e,isFirmPage:!0}},e.prototype.processCategoryFilter=function(e,r){return void 0===r&&(r=!1),0===e.length?{path:"",querystring:""}:1===e.length?r?{path:"",querystring:"&category="+(e[0].Id||e[0].Value)}:e[0].Id===e[0].Value?{path:"",querystring:""}:{path:"/"+e[0].Value,querystring:""}:{path:"",querystring:"&"+e.map(function(e){return"category="+e.Id}).join("&")}},e.prototype.checkMinAndMax=function(e){return{minPriceExists:0<e.filter(function(e){return"minPrice"===e.PropertyName}).length,maxPriceExists:0<e.filter(function(e){return"maxPrice"===e.PropertyName}).length}},e.prototype.processSortFilter=function(e){var r=window.location.search.replace("?","").split("&").filter(function(e){return-1<e.indexOf("sort")})[0];return r&&-1==e.indexOf("sort=")?"&"+r:""},e.$inject=["$q","$window","HttpHelperService"],e}();e.SearchService=r,angular.module("arabam").service("SearchService",r)}(arabam||(arabam={}));
//# sourceMappingURL=searchService.min.js.map
