var arabam,__extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();!function(e){var t=function(C){function e(e,t,o,i,n,c,a,r,s,l,d,u,f,h,p,m,v,g,y,w){var k=C.call(this,e,t,o,i,n,c,a,r,s,l,d,u,f,h,p,m,v,g,y,w)||this;return k.googletag=window.googletag,k.toggleCityFacade=!1,k.toggleTownFacade=!1,k.suggestCarButtonClick=function(){k.CommonHelperService.setDataLayer("Ilan Listeleme","Bana Arac Oner",null,"gaEvent",!0),window.location.href="/araba-bul/soru?adim=1"},C.prototype.init.call(k),k}return __extends(e,C),e.prototype.init=function(){var o=this;this.bindSegmentifyCallbacks(),this.LastSearchService.init(),this.stickySearchButton(),this.bindClickToFaq(),this.$timeout(function(){o.globalClickListener=function(e){var t=document.querySelector(".overlay-container");if(e.target==t)return o.locationCallBack(!1,o.toggleTownFacade?"town":"city")},o.globalEscapeListener=function(e){if(27==e.keyCode)return o.locationCallBack(!1,o.toggleTownFacade?"town":"city")}}),$(".ad-boxes-container .dfp-main").height()<1&&($(".ad-boxes-container .dfp-main").parent().hide(),$(".ad-boxes-container .box-testler:last-child").show())},e.prototype.bindClickToFaq=function(){var e=document.querySelectorAll(".faq-items-container .faq-item .faq-title");Array.prototype.slice.call(e).forEach(function(t){t.addEventListener("click",function(e){t.parentNode.classList.contains("show")?t.parentNode.classList.remove("show"):t.parentNode.classList.add("show")})})},e.prototype.declareCities=function(e){var t=this;e&&0!=e.length&&e.forEach(function(e){t.cities[e.Name]=!0})},e.prototype.declareTowns=function(e){var t=this;e.forEach(function(e){t.towns[e.Name]=!0}),this.$timeout(function(){t.selectedCitiesAsPlaceholder("towns")},0)},e.prototype.filterKeyToggle=function(e){var t=this;27==e.keyCode?(t.quickSearchIl="",t.dirtyCalc=!0,t.active=0,e.target.blur(),e.preventDefault()):38==e.keyCode?t.checkKey("up"):40==e.keyCode?t.checkKey("down"):13==e.keyCode||32==e.keyCode?(e.preventDefault(),t.checkKey("enter")):(t.dirtyCalc=!0,t.cities=t.cities||{},t.citiesAvailable.forEach(function(e){e.Hovered=!1}),t.active=0)},e.prototype.checkKey=function(e){var t=this,o=t.quickSearchIl?t.$filter("filter")(t.citiesAvailable,t.quickSearchIl):t.citiesAvailable;if(o){if("enter"==e){var i=o[t.active].FriendlyUrl;return t.cities[i]=!t.cities[i],void(t.cities[i]?t.cityChange(o[t.active]):t.cityChangeRemove(o[t.active]))}o.forEach(function(e){e.Hovered=!1}),"up"==e?(0==t.active?t.active=+(o.length-1):t.active--,o[t.active].Hovered=!0):"down"==e&&(t.active==o.length-1?t.active=0:t.dirtyCalc?t.dirtyCalc=!1:t.active++,o[t.active].Hovered=!0),$("#wBH_"+o[t.active].FriendlyUrl).focus(),$("#quick_search_il").focus()}},e.prototype.calculateMissingContentSpace=function(){var e=this,a=document.getElementById("js-hook-missing-space-facade"),r=document.getElementById("js-hook-missing-space-content"),s=document.getElementById("js-hook-missing-space-substract-segmentify"),t=document.getElementById("js-hook-missing-space-save-search"),l=document.getElementById("js-hook-missing-space-notification");window.scrollWithDebounce&&window.removeEventListener("scroll",window.scrollWithDebounce);var d=window.once(function(){e.AnalyticsService.setDataLayer("Ilan Listeleme","Yukarı Çık - Göründü","","gaEvent",!0)}),u=t.offsetHeight,o=function(){var e=!!s&&s.offsetHeight||0,t=a.offsetTop,o=u+e-100,i=t+(r.offsetHeight-o)-100,n=a.offsetHeight>r.offsetHeight,c=(window.pageYOffset||document.documentElement.scrollTop)-i;n&&0<c?(d(),l.classList.remove("dn"),0<c&&c<o?l.classList.add("msn-smaller"):l.classList.remove("msn-smaller")):l.classList.add("dn")};this.$timeout(function(){a.offsetHeight<r.offsetHeight||(o(),window.scrollWithDebounce=window.debounce(function(){o()},40),window.addEventListener("scroll",window.scrollWithDebounce,!1))},15)},e.prototype.fulfillScrollTop=function(){this.scrollTopOfElementIntoViewport("#js-hook-missing-space-content"),document.getElementById("js-hook-missing-space-notification").classList.add("dn"),window.scrollWithDebounce&&(this.AnalyticsService.setDataLayer("Ilan Listeleme","Yukarı Çık - Tıklandı","","gaEvent",!0),window.removeEventListener("scroll",window.scrollWithDebounce,!1))},e.prototype.setFacetedTabClass=function(e,t){var o,i=window.location.href.split("?")[0],n=i.split("/")[i.split("/").length-1],c=e.split(",");if(t)for(var a=0;a<c.length&&!(o=this.searchStringInUrl(n.toLowerCase(),c[a].toLowerCase().replace(/ /g,"-")));a++);else o=this.searchStringInUrl(n.toLowerCase(),e.toLowerCase());var r=this.CommonHelperService.getParameterByName("memberType");return r||o||!t?o&&1==c.length&&!t?"active":e.toLowerCase()&&!t&&e.toLowerCase()==r.toLowerCase()?"active":"":"active"},e.prototype.sendSelectedFiltersToLastSearchService=function(e,t){e=e.replace(window.location.origin,""),this.LastSearchService.saveSearch(this.selectedFilters,e,this.activeCategories,t)},e.prototype.stickySearchButton=function(){var t=this,o=document.getElementById("js-hook-for-listing-submit-cta");if(!o)return!1;var i=document.querySelector(".facets-container");i&&document.addEventListener("scroll",function(){var e=t.offsetOfElement(i);parseInt(e.top)+parseInt(i.offsetHeight)+parseInt(o.offsetHeight)>(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight?o.classList.add("listing-cta-sticky"):o.classList.remove("listing-cta-sticky")});document.querySelector(".shel-banner-container")},e.prototype.offsetOfElement=function(e){var t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+i,left:t.left+o,height:t.height}},e.prototype.stickyCta=function(){return!1},e.prototype.locationCallBack=function(e,t){var o=this,i=document.querySelector(".overlay-container");e?(this.scrollTopOfElementIntoViewport(this.focusedLocation),document.addEventListener("click",this.globalClickListener),document.addEventListener("keyup",this.globalEscapeListener)):(document.removeEventListener("click",this.globalClickListener),document.removeEventListener("keyup",this.globalEscapeListener)),i.style.display=e?"block":"none",this.$timeout(function(){"town"==t?o.toggleTownFacade=e:o.toggleCityFacade=e})},e.prototype.locationFocus=function(e,t){var o=e.target.parentElement.parentElement.parentElement;console.log("focused"),this.focusedLocation=o,this.locationCallBack(!0,t)},e.prototype.setPagination=function(e){var t=window.location.href;t=e?this.CommonHelperService.updateQueryStringParameter(t,"take","50"):this.CommonHelperService.removeUrlParameter("take"),t=this.CommonHelperService.removeUrlParameter("page",t),window.location.href=t},e.$inject=["$scope","CommonHelperService","DialogService","HttpHelperService","$sce","$compile","$timeout","$rootScope","$filter","CompareService","$location","$window","$q","LastSearchService","SwapOpsService","PrevNextService","ShowHideListingService","SearchService","FavoriteService","AnalyticsService"],e}((arabam||(arabam={})).SearchControllerBase);angular.module("arabam").controller("SearchController",t)}();
//# sourceMappingURL=searchController.min.js.map
