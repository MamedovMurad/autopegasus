!function(e){var a=function(){var e=this;e.titles=[],e.filters=[],e.selectedFilters=[],e.selectedCategoryFilters=[],e.timeStamp=0,e.count="0",e.url=""};e.LastSearchItem=a;var t=function(){function e(e,t){this.$rootScope=e,this.$window=t,this.currentSessionId="",this.searches=[]}return e.prototype.init=function(){var e=this;return e.isBrowserCompatible()&&(e.prepareSession(),e.readLocalStorage()),e.isBrowserCompatible()},e.prototype.prepareSession=function(){try{var e=sessionStorage.getItem("currentSessionValue");e?this.currentSessionId=e:(this.currentSessionId=this.createGUID(),sessionStorage.setItem("currentSessionValue",this.currentSessionId))}catch(e){console.warn(e)}},e.prototype.saveSearch=function(e,t,r,i){void 0===r&&(r=[]);var a=this;if(a.shouldBeSaved(e,r)){var n=a.prepareSearchItem(e,r);return n.url=t,n.selectedCategoryFilters=r,n.count=i,n.sessionId=a.currentSessionId,a.shouldCreateNew(r)?a.searches.unshift(n):a.searches[0]=n,a.searches.splice(2),a.searches[0]&&a.searches[1]&&a.searches[0].sessionId==a.searches[1].sessionId&&a.searches.splice(1),a.writeLocalStorage(),!0}return!1},e.prototype.shouldBeSaved=function(e,t){return!!this.isBrowserCompatible()&&0<e.filter(function(e){return"view"!=e.PropertyName&&"currency"!=e.PropertyName&&"page"!=e.PropertyName}).length},e.prototype.shouldCreateNew=function(e){var t=this.searches[0];if(!t)return!0;t.selectedCategoryFilters;return t.sessionId!=this.currentSessionId},e.prototype.prepareSearchItem=function(e,t){var r=new a,i="";return e.forEach(function(e){switch(e.PropertyName){case"town":var t=1<e.DisplayName.split("-").length?e.DisplayName.split("-")[1]:e.DisplayName;t[0]=t[0].toUpperCase(),r.filters.push(t);break;case"city":case"fuel":case"tag":case"damagestatus":case"color":case"photo":case"gear":case"membertype":case"bodytype":case"lifeStyle":r.filters.push(e.DisplayName);break;case"category":case"view":case"page":case"currency":case"wizardTag":break;default:r.filters.push(e.Name+": "+e.DisplayName)}}),r.filters=r.filters.filter(this.onlyUnique),t.forEach(function(t){t.forEach(function(e){1==t.length?i+=" "+e.Name:1<e.Level&&(i+=" "+e.Name)}),r.titles.push(i.trim()),i=""}),r.selectedFilters=e,r.timeStamp=Math.floor(Date.now()),r},e.prototype.onlyUnique=function(e,t,r){return r.indexOf(e)===t},e.prototype.remove=function(e){return"number"==typeof e&&(this.searches.splice(e,1),this.writeLocalStorage(),!0)},e.prototype.removeItem=function(e){for(var t=this,r=-1,i=0;i<t.searches.length;i++){t.searches[i].timeStamp==e.timeStamp&&(r=i)}return-1<r&&(t.searches.splice(r,1),t.writeLocalStorage(),!0)},e.prototype.getSearches=function(){return this.searches},e.prototype.getSessionId=function(){return this.currentSessionId},e.prototype.empty=function(){return this.searches=[],this.writeLocalStorage(),!0},e.prototype.writeLocalStorage=function(){try{localStorage.setItem("lastSearches",JSON.stringify(this.searches))}catch(e){return!1}return!0},e.prototype.readLocalStorage=function(){try{var e=localStorage.getItem("lastSearches");e&&(this.searches=JSON.parse(e))}catch(e){return!1}return!0},e.prototype.storageAvailable=function(e){try{var t=this.$window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!1}},e.prototype.isBrowserCompatible=function(){var e=!1;return(e=this.storageAvailable("localStorage"))||(e=this.storageAvailable("sessionStorage")),e},e.prototype.createGUID=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()},e.$inject=["$rootScope","$window"],e}();e.LastSearchService=t,angular.module("arabam").service("LastSearchService",t)}(arabam||(arabam={})),function(e){var t=function(){function e(e,t,r,i){this.CommonHelperService=e,this.HttpHelperService=t,this.DialogService=r,this.$rootScope=i,this.selectedSwapCriterias=[]}return e.prototype.init=function(e){console.log("xxx loaded SwapOpsService"),this.checkSelectedSwapCriterias(e)},e.prototype.checkSelectedSwapCriterias=function(e){var t=this;this.HttpHelperService.httpGet("/search/selectedSwapCriterias"+e,function(e){t.parseSwapFromValidation(e)})},e.prototype.openSwapPopup=function(){var t=this;console.log(this.selectedSwapCriterias),this.DialogService.callSwapFilter({swapInitiator:this.selectedSwapCriterias||null,takasFacetContainer:this.swapInitiatorFacade}).then(function(e){"string"!=typeof e&&(t.swapInitiator=e.reqObj,t.swapInitiatorFacade=e.takasFacetContainer,t.parseSwapFromDialog(e.reqObj))}).catch(function(e){t.DialogService.warning({error:e.Message||e})})},e.prototype.parseSwapFromDialog=function(e){var t=!!e&&e.QueryAsStr[0];if(0!=t.length){this.selectedSwapCriterias=[];for(var r=t.length-1;0<=r;r--){var i=JSON.parse(t[r]);for(var a in i)if(i.hasOwnProperty(a)){var n=""+a,o=i[a];if("mobileproperties"==n.toLowerCase()){n=o[0].Key;var s=o[0].Value[0];o=this.CommonHelperService.isDigit(s)?s:this.CommonHelperService.toFriendlyUrl(s)}if("city"!=n.toLowerCase()&&"category"!=n.toLowerCase()||(o=this.CommonHelperService.isDigit(o)&&"object"!=typeof o?o:o[0]),0==this.selectedSwapCriterias.length||-1==this.CommonHelperService.findInArray(this.selectedSwapCriterias,"PropertyName",n)){var l={PropertyName:n,Items:[{Value:o}]};this.selectedSwapCriterias.push(l)}else{var c=this.CommonHelperService.findInArray(this.selectedSwapCriterias,"PropertyName",n);!!(-1<this.CommonHelperService.findInArray(this.selectedSwapCriterias[c].Items,"Value",o))||this.selectedSwapCriterias[c].Items.push({Value:o})}}console.log(this.selectedSwapCriterias)}this.reWriteUrlBySwap()}else this.selectedSwapCriterias=null},e.prototype.parseSwapFromValidation=function(e){if(!e||e&&0==e.length)return!1;for(var t=e.length-1;0<=t;t--){var r=e[t];if(0==this.selectedSwapCriterias.length||-1==this.CommonHelperService.findInArray(this.selectedSwapCriterias,"PropertyName",r.PropertyName)){var i={PropertyName:r.PropertyName,Items:[{Value:r.Value,Text:r.Text}]};this.selectedSwapCriterias.push(i)}else{var a=this.CommonHelperService.findInArray(this.selectedSwapCriterias,"PropertyName",r.PropertyName);this.selectedSwapCriterias[a].Items.push({Value:r.Value,Text:r.Text})}}this.$rootScope.selectedSwapCount=e.length},e.prototype.clearSwapCriteriasFromUrl=function(){var e,a,t="",r=0,i=(e=window.location.search,a={},e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,r,i){a[t]=i}),a);for(var n in i)i.hasOwnProperty(n)&&(-1<n.indexOf("swapCriterias")?delete i[""+n]:(t+=(0==r?"?":"&")+n+"="+i[n],r++));return t=-1==t.indexOf("swap=Evet")?t+"&swap=Evet":t},e.prototype.reWriteUrlBySwap=function(){for(var e=this.selectedSwapCriterias,t=this.clearSwapCriteriasFromUrl(),r=["city","category","minprice","maxprice","minyear","maxyear"],i="",a=e.length-1;0<=a;a--)for(var n=e[a],o=n.Items.length-1;0<=o;o--){var s=n.Items[o];-1<r.indexOf((""+n.PropertyName).toLowerCase())?i+="&swapCriterias."+n.PropertyName+"="+s.Value:i+="&swapCriterias.querystring="+n.PropertyName+"~"+s.Value}window.location.search=t+i},e.$inject=["CommonHelperService","HttpHelperService","DialogService","$rootScope"],e}();angular.module("arabam").service("SwapOpsService",t)}(arabam||(arabam={})),function(e){var t=function(){function r(e,t){this.$rootScope=e,this.$window=t,this.advertDetailPopupHidden=!0,this.showAdvertDetailBackdrop=!1,this.travelSize=0;this.rootScope=e,this.window=t,this.adverts=[],this.advertId="",this.currentAdvert=""}return r.prototype.init=function(){return this.isBrowserCompatible()&&this.readLocalStorage(),this.isBrowserCompatible()},r.prototype.setCurrentAdvert=function(e){return this.currentAdvert=e,!0},r.prototype.getCurrentAdvert=function(){return this.currentAdvert},r.prototype.findIndexOfCurrentItem=function(e){if(this.adverts){for(var t=0;t<this.adverts.length;t++){if(this.adverts[t].advertId==(e||this.currentAdvert))return t}return-1}return null},r.prototype.getPreviousAdvertData=function(e){var t=this,r=t.findIndexOfCurrentItem(e);return r<0?t.adverts[t.adverts.length-1]:0<r&&1<t.adverts.length?t.adverts[r-1]:null},r.prototype.getNextAdvertData=function(e){var t=this.findIndexOfCurrentItem(e);return t<this.adverts.length?this.adverts[t+1]:null},r.prototype.add=function(e){var t=this;return t.adverts=e.adverts,t.advertId=e.advertId,t.currentPage=e.currentPage,t.totalPage=e.totalPage,t.searchUrl=e.searchUrl,t.writeLocalStorage(),!0},r.prototype.get=function(){var e=this;return e.readLocalStorage(),{adverts:e.adverts,advertId:e.advertId,currentPage:e.currentPage,totalPage:e.totalPage,searchUrl:e.searchUrl}},r.prototype.empty=function(){return this.adverts=[],this.advertId="",this.writeLocalStorage(),!0},r.prototype.writeLocalStorage=function(){var e=this;try{localStorage.setItem("prevNextAdverts",JSON.stringify({advertId:e.advertId,adverts:e.adverts,currentPage:e.currentPage,totalPage:e.totalPage,searchUrl:e.searchUrl}))}catch(e){return!1}return!0},r.prototype.readLocalStorage=function(){var e=this;try{var t=localStorage.getItem("prevNextAdverts");if(t){var r=JSON.parse(t);e.advertId=r.advertId,e.adverts=r.adverts,e.currentPage=r.currentPage,e.totalPage=r.totalPage,e.searchUrl=r.searchUrl}}catch(e){return!1}return!0},r.prototype.storageAvailable=function(e){try{var t=this.$window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!1}},r.prototype.isBrowserCompatible=function(){var e=!1;return(e=this.storageAvailable("localStorage"))||(e=this.storageAvailable("sessionStorage")),e},r.factory=function(){return function(e,t){return new r(e,t)}},r.$inject=["$rootScope","$window"],r}();e.PrevNextService=t,angular.module("arabam").factory("PrevNextService",["$rootScope","$window",t.factory()])}(arabam||(arabam={})),function(e){var t=function(){function e(e,t,r){this.$q=e,this.$window=t,this.HttpHelperService=r,this.viewDictionary=["List","Detailed","Box"],this.rangeFacetDictionary=["price","km","year"],this.isMobile=window.configuration.IsMobile}return e.prototype.searchAndGetHtml=function(e){var t=this.$q.defer();return this.HttpHelperService.httpGet(e,function(e){t.resolve(e)},function(){t.reject()},{isNotLoading:!!this.isMobile}),t.promise},e.prototype.prepareSearchUrl=function(e){var t=this,r=this.createQueryBaseBootstrap(this.$window.location.pathname),i=r.base,a=r.isFirmPage,n=e.filter(function(e){return e.Value&&"category"===e.PropertyName}),o=n?n.length:0,s=this.processCategoryFilter(n,a),l=s.path,c=s.querystring;e=this.clearRangeFacets(e);var u=this.checkMinAndMax(e),p=u.minPriceExists,d=u.maxPriceExists;return e.filter(function(e){return"category"!=e.PropertyName}).map(function(e){return"redirectAdvertId"===e.PropertyName||e.IsDynamic&&0==o||"currency"===e.PropertyName&&!p&&!d||("view"==e.PropertyName?c+="&"+e.PropertyName+"="+t.viewDictionary[+e.Value]:"tag"==e.PropertyName||"swap"==e.PropertyName||"koltuksayisi"==e.PropertyName?c+="&"+e.PropertyName+"="+encodeURIComponent(e.Value):c+="&"+e.PropertyName+"="+e.Value),e}),i+l+"?"+(c+=this.processSortFilter(c))},e.prototype.calculateHowManyOfTheSameFacet=function(e,t){return e.filter(function(e){return e.PropertyName===t}).length},e.prototype.clearRangeFacets=function(t){var r=this;return this.rangeFacetDictionary.map(function(e){t=r.clearCheckboxValuesOfSingleRangeFacet(t,e)}),t},e.prototype.clearCheckboxValuesOfSingleRangeFacet=function(e,t){var r=e.filter(function(e){return(e.PropertyName.toLowerCase()=="min"+t||e.PropertyName.toLowerCase()=="max"+t)&&e.Modified});r&&0<r.length&&(e=e.filter(function(e){return e.PropertyName!=t}));var i=e.filter(function(e){return e.PropertyName.toLowerCase()==t&&e.Modified});return i&&0<i.length&&(e=e.filter(function(e){return!(e.PropertyName.toLowerCase()=="min"+t||e.PropertyName.toLowerCase()=="max"+t)})),e},e.prototype.sortFilters=function(e){return e.sort(function(e,t){var r=e.PropertyName.toLowerCase(),i=t.PropertyName.toLowerCase();return i<r?1:r<i?-1:0})},e.prototype.createPrettyUrl=function(e){return e.map(function(e){return e.Text}).join("-")},e.prototype.createQueryBaseBootstrap=function(e){return-1<e.indexOf("ikinci-el/")?{base:"/ikinci-el",isFirmPage:!1}:-1<e.indexOf("sifir-km/")?{base:"/sifir-km",isFirmPage:!1}:{base:e,isFirmPage:!0}},e.prototype.processCategoryFilter=function(e,t){return void 0===t&&(t=!1),0===e.length?{path:"",querystring:""}:1===e.length?t?{path:"",querystring:"&category="+(e[0].Id||e[0].Value)}:e[0].Id===e[0].Value?{path:"",querystring:""}:{path:"/"+e[0].Value,querystring:""}:{path:"",querystring:"&"+e.map(function(e){return"category="+e.Id}).join("&")}},e.prototype.checkMinAndMax=function(e){return{minPriceExists:0<e.filter(function(e){return"minPrice"===e.PropertyName}).length,maxPriceExists:0<e.filter(function(e){return"maxPrice"===e.PropertyName}).length}},e.prototype.processSortFilter=function(e){var t=window.location.search.replace("?","").split("&").filter(function(e){return-1<e.indexOf("sort")})[0];return t&&-1==e.indexOf("sort=")?"&"+t:""},e.$inject=["$q","$window","HttpHelperService"],e}();e.SearchService=t,angular.module("arabam").service("SearchService",t)}(arabam||(arabam={})),function(e){var t=function(){function e(e,t,r,i){this.$q=e,this.HttpHelperService=t,this.$window=r,this.$rootScope=i,this.favoriteList={addDate:void 0,list:[]}}return e.prototype.init=function(){var t=this;return!!this.isBrowserCompatible()&&(this.readLocalStorage(),this.favoriteList&&(this.favoriteList.addDate&&this.favoriteList.addDate+864e5<Date.now()||!this.favoriteList.addDate)&&this.getFavoritesFromService().then(function(e){t.favoriteList.list=e,t.writeLocalStorage()}),!0)},e.prototype.toggleFavorite=function(e){return this.checkIfFavorited(e)?this.removeFromFavorite(e):this.addToFavorite(e)},e.prototype.addToFavorite=function(t,e){var r=this.$q.defer(),i=this,a={AdvertId:t};return this.HttpHelperService.httpPost("/ilan/favori",a,function(e){i.favoriteList.list.push(t),i.writeLocalStorage(),i.$rootScope.UnreadFavCount=+i.$rootScope.UnreadFavCount+1,r.resolve(e.Success)},function(e){r.reject(e)},{isNotLoading:!0}),r.promise},e.prototype.removeFromFavorite=function(t){var r=this.$q.defer(),i=this;return this.HttpHelperService.httpDelete("/ilan/favorisil?Id="+t,function(e){i.favoriteList.list.splice(i.favoriteList.list.indexOf(t),1),i.writeLocalStorage(),i.$rootScope.UnreadFavCount=+i.$rootScope.UnreadFavCount-1,r.resolve(e.Success)},function(e){r.reject(e)},{isNotLoading:!0}),r.promise},e.prototype.getFavoritesFromService=function(){var t=this.$q.defer();return this.HttpHelperService.httpGetWithPromise("/ilan/favoriilanlar",{isNotLoading:!0}).then(function(e){t.resolve(e.Data)}).catch(function(e){t.reject(e)}),t.promise},e.prototype.checkIfFavorited=function(e){return!(!this.favoriteList||!this.favoriteList.list)&&-1<this.favoriteList.list.indexOf(e)},e.prototype.writeLocalStorage=function(){try{this.favoriteList.addDate=Date.now(),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList))}catch(e){return!1}return!0},e.prototype.readLocalStorage=function(){try{var e=localStorage.getItem("favoriteList");e&&(this.favoriteList=JSON.parse(e))}catch(e){return!1}return!0},e.prototype.storageAvailable=function(e){try{var t=this.$window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!1}},e.prototype.isBrowserCompatible=function(){var e=!1;return(e=this.storageAvailable("localStorage"))||(e=this.storageAvailable("sessionStorage")),e},e.$inject=["$q","HttpHelperService","$window","$rootScope"],e}();e.FavoriteService=t,angular.module("arabam").service("FavoriteService",t)}(arabam||(arabam={})),function(e){var t=function(){function e(){this.AnalyticsFilters={view:"CD_Listing_Gorunum",city:"CD_Listing_Filters_Il",town:"CD_Listing_Filters_Ilce",price:"CD_Listing_Filters_Fiyat",minPrice:"CD_Listing_Filters_Fiyat",maxPrice:"CD_Listing_Filters_Fiyat",gear:"CD_Listing_Filters_VitesTipi",year:"CD_Listing_Filters_Yil",minYear:"CD_Listing_Filters_Yil",maxYear:"CD_Listing_Filters_Yil",fuel:"CD_Listing_Filters_YakitTipi",km:"CD_Listing_Filters_Kilometre",minkm:"CD_Listing_Filters_Kilometre",maxkm:"CD_Listing_Filters_Kilometre",bodytype:"CD_Listing_Filters_KasaTipi",color:"CD_Listing_Filters_Renk",searchtext:"CD_Listing_Filters_AnahtarKelime",tag:"CD_Listing_Filters_Ozelilanlar",cc:"CD_Listing_Filters_MotorHacmi",hp:"CD_Listing_Filters_MotorGucu",w:"CD_Listing_Filters_MotorGucu",ruhsat:"CD_Listing_Filters_AracCinsiRuhsat",photo:"CD_Listing_Filters_Fotografliilanlar",swap:"CD_Listing_Filters_TakasaUygun",ustyapi:"CD_Listing_Filters_UstYapi",cekis:"CD_Listing_Filters_Cekis",aracmarkasi:"CD_Listing_Filters_Markalar",aracinmarkasi:"CD_Listing_Filters_Markalar",hisseli:"CD_Listing_Filters_Hisseli",koltuksayisi:"CD_Listing_Filters_KoltukSayisi",membertype:"CD_Listing_Filters_IlanSahibi",motosiklettipi:"CD_Listing_Filters_MotosikletTipi",drive:"CD_Listing_Filters_CekisTipi",powertrain:"CD_Listing_Filters_GucAktarma",cylinder:"CD_Listing_Filters_SilindirSayisi",silindir:"CD_Listing_Filters_SilindirSayisi",cooling:"CD_Listing_Filters_SogutmaSistemi",kmh:"CD_Listing_Filters_Hiz",brands:"CD_Listing_Filters_Brands",status:"CD_Listing_Filters_Durumu",distance:"CD_Listing_Filters_SurusMesafesi",araclabirlikte:"CD_Listing_Filters_AraclaBirlikte",mv:"CD_Listing_Filters_MotorVoltaji",plakasi:"CD_Listing_Filters_Plaka",days:"CD_Listing_Filters_IlanTarihi",eq:"CD_Listing_Filters_Donanim"},this.AnalyticsExcludeFilter=["category","page","currency"],this.RangeFilters=["km","price","year"]}return e.prototype.setDataLayer=function(e,t,r,i,a){var n=window.dataLayer;a?n.push({Category:e,Action:t,Label:r,event:i,nonInteraction:!0}):n.push({Category:e,Action:t,Label:r,event:i})},e.prototype.setDataLayerVp=function(r,i,e){var t=window.dataLayer;if(e){var a=!1;if($(t).each(function(e,t){t.pageView===r&&t.event===i&&(a=!0)}),a)return}t.push({pageView:r,event:i})},e.prototype.sendSearchParameters=function(e){var t=this;this.cleanCustomDimensions();var r=e.filter(function(e){return"category"==e.PropertyName}),i=this.prepareCustomDimensionsForCategories(r);i.map(function(e){t.upsertCustomDimension(e)});var a=e.filter(function(e){return-1==t.AnalyticsExcludeFilter.indexOf(e.PropertyName)});(i=this.prepareCustomDimensionsForFilters(a)).map(function(e){t.upsertCustomDimension(e)}),this.sendRemainingFilterDimensions()},e.prototype.prepareCustomDimensionsForCategories=function(e){for(var t=[],r=0;r<3;r++){var i=e[r];if(i){var a=i.DisplayName.split(" / ");"2. El"==a[0]&&a.splice(0,1);for(var n=0;n<5;n++){var o=a[n];(s={})["CD_Listing_Brand"+(r+1)+"_CategoryLevel_"+(n+1)]=o||"null",t.push(s)}t.push(this.prepareCustomDimensionsBreadCrumbs(i.DisplayName,r))}else{for(n=0;n<5;n++){var s;(s={})["CD_Listing_Brand"+(r+1)+"_CategoryLevel_"+(n+1)]="null",t.push(s)}t.push(this.prepareCustomDimensionsBreadCrumbs("null",r))}}return t},e.prototype.prepareCustomDimensionsBreadCrumbs=function(e,t){var r={};return r["CD_Listing_Brand"+(t+1)+"_Breadcrumb"]=e,r},e.prototype.prepareCustomDimensionsForFilters=function(s){var l=this,c=[];return s.map(function(i){var e=c.filter(function(e){var t=l.AnalyticsFilters[i.PropertyName];return e.hasOwnProperty(t)});if(e&&0==e.length){var t=s.filter(function(e){if(-1<i.PropertyName.indexOf("min")){var t=i.PropertyName.replace("min","max");return i.PropertyName==e.PropertyName||t==e.PropertyName}if(-1<i.PropertyName.indexOf("max")){var r=i.PropertyName.replace("max","min");return i.PropertyName==e.PropertyName||r==e.PropertyName}return i.PropertyName==e.PropertyName});if(t&&0<t.length){var r={},a=l.AnalyticsFilters[i.PropertyName];if(-1<i.PropertyName.indexOf("min")||-1<i.PropertyName.indexOf("max")){var n=t.filter(function(e){return-1<e.PropertyName.indexOf("min")}),o=t.filter(function(e){return-1<e.PropertyName.indexOf("max")});r[a]=(n[0]?n[0].Value:"")+"-"+(o[0]?o[0].Value:"")}else r[a]=t.map(function(e){switch(e.PropertyName){case"city":case"town":case"eq":return e.DisplayName;default:return e.Value}}).join(",");console.debug("range cd",r),c.push(r)}}}),c},e.prototype.cleanCustomDimensions=function(){for(var e in this.AnalyticsFilters)for(var t=window.dataLayer.length;t<=0;t--){var r=window.dataLayer[t];for(var i in r.hasOwnProperty(this.AnalyticsFilters[e])&&window.dataLayer.splice(t,1),r)if(r.hasOwnProperty(i)&&(-1<i.indexOf("CM_ListAdvertCount")||-1<i.indexOf("CD_Listing_ViewType")||-1<i.indexOf("CD_Listing_PageNumber")||-1<i.indexOf("_Breadcrumb")||-1<i.indexOf("_CategoryLevel_"))){window.dataLayer.splice(t,1);break}}},e.prototype.sendNullForEveryCD=function(){for(var e in this.AnalyticsFilters)if(this.AnalyticsFilters.hasOwnProperty(e)){var t={};t[this.AnalyticsFilters[e]]="null",window.dataLayer.push(t)}},e.prototype.upsertCustomDimension=function(e){for(var t=-1,r=0;r<window.dataLayer.length;r++){var i=window.dataLayer[r],a="";for(var n in e)e.hasOwnProperty(n)&&(a=n);i.hasOwnProperty(a)&&(t=r)}-1<t&&window.dataLayer.splice(t,1),window.dataLayer.push(e)},e.prototype.sendRemainingFilterDimensions=function(){var e=this;for(var t in e.AnalyticsFilters)if(e.AnalyticsFilters.hasOwnProperty(t)){for(var r=-1,i=0;i<window.dataLayer.length;i++){var a=window.dataLayer[i],n=e.AnalyticsFilters[t];for(var o in n)n.hasOwnProperty(o)&&o;a.hasOwnProperty(e.AnalyticsFilters[t])&&(r=i)}if(-1==r){var s={};s[e.AnalyticsFilters[t]]="null",window.dataLayer.push(s)}}},e}();e.AnalyticsService=t,angular.module("arabam").service("AnalyticsService",t)}(arabam||(arabam={})),function(e){var t=function(){function e(e){this.$window=e}return e.prototype.init=function(){return this.isBrowserCompatible()},e.prototype.markAsHidden=function(e){try{var t=JSON.parse(localStorage.getItem("hiddenListings"))||[];return t.push(e),localStorage.setItem("hiddenListings",JSON.stringify(t)),!0}catch(e){return!1}},e.prototype.removeAsHidden=function(e){try{var t=JSON.parse(localStorage.getItem("hiddenListings"))||[];return t.splice(t.indexOf(e),1),localStorage.setItem("hiddenListings",JSON.stringify(t)),!0}catch(e){return!1}},e.prototype.isBrowserCompatible=function(){var e=!1;return(e=this.storageAvailable("localStorage"))||(e=this.storageAvailable("sessionStorage")),e},e.prototype.toggle=function(e){try{return this.isHidden(e)?this.removeAsHidden(e):this.markAsHidden(e)}catch(e){return!1}},e.prototype.isHidden=function(e){try{return-1<(JSON.parse(localStorage.getItem("hiddenListings"))||[]).indexOf(e)}catch(e){return!1}},e.prototype.storageAvailable=function(e){try{var t=this.$window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!1}},e.$inject=["$window"],e}();e.ShowHideListingService=t,angular.module("arabam").service("ShowHideListingService",t)}(arabam||(arabam={})),function(e){var t=function(){function t(e){this.$compile=e,this.restrict="A",this.link=function(e,t,r,i){var a,n,o;try{a=JSON.parse(localStorage.getItem("togglerV2")),n="undefined"!=typeof Storage}catch(e){n=!1}$(t).next();var s=e.self,l=r.miniToggleVisible;o=window.configuration.IsMobile,s.toggler=s.toggler?s.toggler:{},a?s.toggler=a:s.toggler.hasOwnProperty()||(s.toggler[l]=!o&&("multi-category"===l&&(!a||!a[l]||a[l])),n&&localStorage.setItem("togglerV2",JSON.stringify(s.toggler))),t.bind("click",function(){e.$apply(function(){s.toggler[l]=!s.toggler[l],n&&localStorage.setItem("togglerV2",JSON.stringify(s.toggler))})})}}return t.factory=function(){var e=function(e){return new t(e)};return e.$inject=["$compile"],e},t}();angular.module("arabam").directive("miniToggle",t.factory())}(arabam||(arabam={})),arabam||(arabam={}),angular.module("arabam").directive("lastSearches",function(){return{restrict:"EA",transclude:!0,scope:{searchCallback:"&",deleteCallback:"&"},replace:!0,templateUrl:"lastSearches.html",controller:["$scope","LastSearchService",function(t,r){var i=this;function a(e,t,r){return r.indexOf(e)===t}i.searches=[],i.sessionId="",i.init=function(){var t=this;t.searches=r.getSearches(),t.sessionId=r.getSessionId(),t.searches.map(function(e){e.filters=e.filters.filter(a)}),t.searches=t.searches.filter(function(e){return e.sessionId!=t.sessionId})},i.remove=function(e){r.removeItem(e),i.init(),t.deleteCallback()},i.search=function(e){t.searchCallback({selectedFilters:e.selectedFilters,url:e.url})},i.init()}],controllerAs:"ls"}}),function(){"use strict";var f=8,p=9,v=13,d=27,y=32,h=38,m=40,w=37,S=39,C=46,b=188,o=9007199254740991,t=["text","email","url"],e=angular.module("arabam");e.directive("tagsInput",["$timeout","$document","$window","$q","tagsInputConfig","tiUtil",function(d,h,m,u,i,g){function a(i,r,a,t){var n,o,s,l,c={};return n=function(e){return g.safeToString(e[i.displayProperty])},o=function(e,t){e[i.displayProperty]=t},s=function(e){var t=n(e),r=t&&t.length>=i.minLength&&t.length<=i.maxLength&&i.allowedTagsPattern.test(t)&&!g.findInObjectArray(c.items,e,i.keyProperty||i.displayProperty);return u.when(r&&a({$tag:e})).then(g.promisifyValue)},l=function(e){return u.when(t({$tag:e})).then(g.promisifyValue)},c.items=[],c.addText=function(e){var t={};return o(t,e),c.add(t)},c.add=function(e){var t=n(e);return i.replaceSpacesWithDashes&&(t=g.replaceSpacesWithDashes(t)),o(e,t),s(e).then(function(){c.items.push(e),r.trigger("tag-added",{$tag:e})}).catch(function(){t&&r.trigger("invalid-tag",{$tag:e})})},c.remove=function(e){var t=c.items[e];return l(t).then(function(){return c.items.splice(e,1),c.clearSelection(),r.trigger("tag-removed",{$tag:t}),t})},c.select=function(e){e<0?e=c.items.length-1:e>=c.items.length&&(e=0),c.index=e,c.selected=c.items[e]},c.selectPrior=function(){c.select(--c.index)},c.selectNext=function(){c.select(++c.index)},c.removeSelected=function(){return c.remove(c.index)},c.clearSelection=function(){c.selected=null,c.index=-1},c.getItems=function(){return i.useStrings?c.items.map(n):c.items},c.clearSelection(),c}function n(e){return-1!==t.indexOf(e)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",templateScope:"=?",hasFocusVariable:"=",tagClass:"&",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(r,e,t){r.events=g.simplePubSub(),i.load("tagsInput",r,e,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",n],placeholder:[String,""],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,o],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,o],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0],useStrings:[Boolean,!1]}),r.tagList=new a(r.options,r.events,g.handleUndefinedResult(r.onTagAdding,!0),g.handleUndefinedResult(r.onTagRemoving,!0)),this.registerAutocomplete=function(){t.find("input");return{addTag:function(e){return r.tagList.add(e)},getTags:function(){return r.tagList.items},getCurrentTagText:function(){return r.newTag.text()},getOptions:function(){return r.options},getTemplateScope:function(){return r.templateScope},on:function(e,t){return r.events.on(e,t,!0),this}}},this.registerTagItem=function(){return{getOptions:function(){return r.options},removeTag:function(e){r.disabled||r.tagList.remove(e)}}}}],link:function(s,i,e,t){var r,a,l=[v,b,y,f,C,w,S],c=s.tagList,n=s.events,u=s.options,o=i.find("input"),p=["minTags","maxTags","allowLeftoverText"];r=function(){t.$setValidity("maxTags",c.items.length<=u.maxTags),t.$setValidity("minTags",c.items.length>=u.minTags),t.$setValidity("leftoverText",!(!s.hasFocus&&!u.allowLeftoverText)||!s.newTag.text())},a=function(){d(function(){o[0].focus()})},t.$isEmpty=function(e){return!e||!e.length},s.newTag={text:function(e){if(!angular.isDefined(e))return s.text||"";s.text=e,n.trigger("input-change",e)},invalid:null},s.track=function(e){return e[u.keyProperty||u.displayProperty]},s.getTagClass=function(e,t){var r=e===c.selected;return[s.tagClass({$tag:e,$index:t,$selected:r}),{selected:r}]},s.$watch("tags",function(e){if(e){if(c.items=g.makeObjectArray(e,u.displayProperty),u.useStrings)return;s.tags=c.items}else c.items=[]}),s.$watch("tags.length",function(){r(),t.$validate()}),e.$observe("disabled",function(e){s.disabled=e}),s.eventHandlers={input:{keydown:function(e){n.trigger("input-keydown",e)},focus:function(){s.hasFocus||(s.hasFocus=!0,s.hasFocusVariable=!0,n.trigger("input-focus"))},blur:function(){d(function(){var e=h.prop("activeElement"),t=e===o[0],r=i[0].contains(e);!t&&r||(s.hasFocus=!1,s.hasFocusVariable=!1,n.trigger("input-blur"))})},paste:function(t){t.getTextData=function(){var e=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData;return e?e.getData("text/plain"):m.clipboardData.getData("Text")},n.trigger("input-paste",t)}},host:{click:function(){s.disabled||a()}},tag:{click:function(e){n.trigger("tag-clicked",{$tag:e})}}},n.on("tag-added",s.onTagAdded).on("invalid-tag",s.onInvalidTag).on("tag-removed",s.onTagRemoved).on("tag-clicked",s.onTagClicked).on("tag-added",function(){s.newTag.text("")}).on("tag-added tag-removed",function(){s.tags=c.getItems(),t.$setDirty(),a()}).on("invalid-tag",function(){s.newTag.invalid=!0}).on("option-change",function(e){-1!==p.indexOf(e.name)&&r()}).on("input-change",function(){c.clearSelection(),s.newTag.invalid=null}).on("input-focus",function(){i.triggerHandler("focus"),t.$setValidity("leftoverText",!0)}).on("input-blur",function(){u.addOnBlur&&!u.addFromAutocompleteOnly&&c.addText(s.newTag.text()),i.triggerHandler("blur"),r()}).on("input-keydown",function(e){var t,r,i,a,n=e.keyCode,o={};g.isModifierOn(e)||-1===l.indexOf(n)||(o[v]=u.addOnEnter,o[b]=u.addOnComma,o[y]=u.addOnSpace,t=!u.addFromAutocompleteOnly&&o[n],r=(n===f||n===C)&&c.selected,a=n===f&&0===s.newTag.text().length&&u.enableEditingLastTag,i=(n===f||n===w||n===S)&&0===s.newTag.text().length&&!u.enableEditingLastTag,t?c.addText(s.newTag.text()):a?(c.selectPrior(),c.removeSelected().then(function(e){e&&s.newTag.text(e[u.displayProperty])})):r?c.removeSelected():i&&(n===w||n===f?c.selectPrior():n===S&&c.selectNext()),(t||i||r||a)&&e.preventDefault())}).on("input-paste",function(e){if(u.addOnPaste){var t=e.getTextData().split(u.pasteSplitPattern);1<t.length&&(t.forEach(function(e){c.addText(e)}),e.preventDefault())}})}}}]),e.directive("tiTagItem",["tiUtil",function(o){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:function(t,e,r,i){var a=i.registerTagItem(),n=a.getOptions();t.$$template=n.template,t.$$removeTagSymbol=n.removeTagSymbol,t.$getDisplayText=function(){return o.safeToString(t.data[n.displayProperty])},t.$removeTag=function(){a.removeTag(t.$index)},t.$watch("$parent.$index",function(e){t.$index=e})}}}]),e.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(e,t,r,c,i,u){function a(i,a,t){var n,o,s,l={};return s=function(){return a.tagsInput.keyProperty||a.tagsInput.displayProperty},n=function(e,t){return e.filter(function(e){return!u.findInObjectArray(t,e,s(),function(e,t){return a.tagsInput.replaceSpacesWithDashes&&(e=u.replaceSpacesWithDashes(e),t=u.replaceSpacesWithDashes(t)),u.defaultComparer(e,t)})})},l.reset=function(){o=null,l.items=[],l.visible=!1,l.index=-1,l.selected=null,l.query=null},l.show=function(){a.selectFirstMatch?l.select(0):l.selected=null,l.visible=!0},l.load=u.debounce(function(e,t){l.query=e;var r=c.when(i({$query:e}));(o=r).then(function(e){r===o&&(e=u.makeObjectArray(e.data||e,s()),e=n(e,t),l.items=e.slice(0,a.maxResultsToShow),0<l.items.length?l.show():l.reset())})},a.debounceDelay),l.selectNext=function(){l.select(++l.index)},l.selectPrior=function(){l.select(--l.index)},l.select=function(e){e<0?e=l.items.length-1:e>=l.items.length&&(e=0),l.index=e,l.selected=l.items[e],t.trigger("suggestion-selected",e)},l.reset(),l}return{restrict:"E",require:"^tagsInput",scope:{source:"&",matchClass:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(e,t,r){e.events=u.simplePubSub(),i.load("autoComplete",e,r,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),e.suggestionList=new a(e.source,e.options,e.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return e.options},getQuery:function(){return e.suggestionList.query}}}}],link:function(i,l,e,t){var r,a=[v,p,d,h,m],n=i.suggestionList,o=t.registerAutocomplete(),s=i.options,c=i.events;s.tagsInput=o.getOptions(),r=function(e){return e&&e.length>=s.minLength||!e&&s.loadOnEmpty},i.templateScope=o.getTemplateScope(),i.addSuggestionByIndex=function(e){n.select(e),i.addSuggestion()},i.addSuggestion=function(){var e=!1;return n.selected&&(o.addTag(angular.copy(n.selected)),n.reset(),e=!0),e},i.track=function(e){return e[s.tagsInput.keyProperty||s.tagsInput.displayProperty]},i.getSuggestionClass=function(e,t){var r=e===n.selected;return[i.matchClass({$match:e,$index:t,$selected:r}),{selected:r}]},o.on("tag-added tag-removed invalid-tag input-blur",function(){n.reset()}).on("input-change",function(e){r(e)?n.load(e,o.getTags()):n.reset()}).on("input-focus",function(){var e=o.getCurrentTagText();s.loadOnFocus&&r(e)&&n.load(e,o.getTags())}).on("input-keydown",function(e){var t=e.keyCode,r=!1;if(!u.isModifierOn(e)&&-1!==a.indexOf(t))return n.visible?t===m?(n.selectNext(),r=!0):t===h?(n.selectPrior(),r=!0):t===d?(n.reset(),r=!0):t!==v&&t!==p||(r=i.addSuggestion()):t===m&&i.options.loadOnDownArrow&&(n.load(o.getCurrentTagText(),o.getTags()),r=!0),r?(e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}),c.on("suggestion-selected",function(e){var t,r,i,a,n,o,s;t=e,r=l.find("li").eq(t),i=r.parent(),a=r.prop("offsetTop"),n=r.prop("offsetHeight"),o=i.prop("clientHeight"),s=i.prop("scrollTop"),a<s?i.prop("scrollTop",a):o+s<a+n&&i.prop("scrollTop",a+n-o)})}}}]),e.directive("tiAutocompleteMatch",["$sce","tiUtil",function(o,s){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:function(e,t,r,i){var a=i.registerAutocompleteMatch(),n=a.getOptions();e.$$template=n.template,e.$index=e.$parent.$index,e.$highlight=function(e){return n.highlightMatchedText&&(e=s.safeHighlight(e,a.getQuery())),o.trustAsHtml(e)},e.$getDisplayText=function(){return s.safeToString(e.data[n.displayProperty||n.tagsInput.displayProperty])}}}}]),e.directive("tiTranscludeAppend",function(){return function(e,t,r,i,a){a(function(e){t.append(e)})}}),e.directive("tiAutosize",["tagsInputConfig",function(s){return{restrict:"A",require:"ngModel",link:function(e,i,a,t){var n,r,o=s.getTextAutosizeThreshold();(n=angular.element('<span class="input"></span>')).css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),i.parent().append(n),r=function(e){var t,r=e;return angular.isString(r)&&0===r.length&&(r=a.placeholder),r&&(n.text(r),n.css("display",""),t=n.prop("offsetWidth"),n.css("display","none")),i.css("width",t?t+o+"px":""),e},t.$parsers.unshift(r),t.$formatters.unshift(r),a.$observe("placeholder",function(e){t.$modelValue||r(e)})}}}]),e.directive("tiBindAttrs",function(){return function(e,t,r){e.$watch(r.tiBindAttrs,function(e){angular.forEach(e,function(e,t){r.$set(t,e)})},!0)}}),e.provider("tagsInputConfig",function(){var m={},g={},t=3;this.setDefaults=function(e,t){return m[e]=t,this},this.setActiveInterpolation=function(e,t){return g[e]=t,this},this.setTextAutosizeThreshold=function(e){return t=e,this},this.$get=["$interpolate",function(d){var h={};return h[String]=function(e){return e},h[Number]=function(e){return parseInt(e,10)},h[Boolean]=function(e){return"true"===e.toLowerCase()},h[RegExp]=function(e){return new RegExp(e)},{load:function(l,c,u,e){var p=function(){return!0};c.options={},angular.forEach(e,function(e,t){var r,i,a,n,o,s;r=e[0],i=e[1],a=e[2]||p,n=h[r],o=function(){var e=m[l]&&m[l][t];return angular.isDefined(e)?e:i},s=function(e){c.options[t]=e&&a(e)?n(e):o()},g[l]&&g[l][t]?u.$observe(t,function(e){s(e),c.events.trigger("option-change",{name:t,newValue:e})}):s(u[t]&&d(u[t])(c.$parent))})},getTextAutosizeThreshold:function(){return t}}}]}),e.factory("tiUtil",["$timeout","$q",function(a,t){var n={debounce:function(t,r){var i;return function(){var e=arguments;a.cancel(i),i=a(function(){t.apply(null,e)},r)}},makeObjectArray:function(e,r){if(!angular.isArray(e)||0===e.length||angular.isObject(e[0]))return e;var i=[];return e.forEach(function(e){var t={};t[r]=e,i.push(t)}),i},findInObjectArray:function(e,t,r,i){var a=null;return i=i||n.defaultComparer,e.some(function(e){if(i(e[r],t[r]))return a=e,!0}),a},defaultComparer:function(e,t){return n.safeToString(e).toLowerCase()===n.safeToString(t).toLowerCase()},safeHighlight:function(e,t){if(e=n.encodeHTML(e),!(t=n.encodeHTML(t)))return e;var r=new RegExp("&[^;]+;|"+t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi");return e.replace(r,function(e){return e.toLowerCase()===t.toLowerCase()?"<em>"+e+"</em>":e})},safeToString:function(e){return angular.isUndefined(e)||null==e?"":e.toString().trim()},encodeHTML:function(e){return n.safeToString(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},handleUndefinedResult:function(t,r){return function(){var e=t.apply(null,arguments);return angular.isUndefined(e)?r:e}},replaceSpacesWithDashes:function(e){return n.safeToString(e).replace(/\s/g,"-")},isModifierOn:function(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey},promisifyValue:function(e){return e=!!angular.isUndefined(e)||e,t[e?"when":"reject"]()},simplePubSub:function(){var i={};return{on:function(e,t,r){return e.split(" ").forEach(function(e){i[e]||(i[e]=[]),(r?[].unshift:[].push).call(i[e],t)}),this},trigger:function(e,t){return(i[e]||[]).every(function(e){return n.handleUndefinedResult(e,!0)(t)}),this}}}};return n}]),e.run(["$templateCache",function(e){e.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="getTagClass(tag, $index)" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item scope="templateScope" data="::tag"></ti-tag-item></li></ul><input style="width: 100%;" class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),e.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),e.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="getSuggestionClass(item, $index)" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match scope="templateScope" data="::item"></ti-autocomplete-match></li></ul></div>'),e.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),function(e){var t=function(){function i(e,t,r){var u=this;this.$timeout=e,this.CommonHelperService=t,this.HttpHelperService=r,this.restrict="A",this.scope={catId:"@",catParentId:"@"},this.link=function(e,t){var r=!1,c=document.getElementById("js-hook-for-hover-breadcrumb-dropdown-"+e.catId),i=t[0],a=+e.catParentId==+e.catId?"/search/child-categories?Id=0":"/search/child-categories?categoryId="+ +e.catParentId,n=function(){console.warn("breadcrumb datasi cekilemedi.")},o=function(){u.HttpHelperService.httpGetWithPromise(a,{isNotLoading:!0}).then(function(e){e.Success&&0<e.Data.length?(e.Data.map(function(e){var t,r,i,a,n,o=e.Name,s=e.AbsoluteUrl,l=(t={Name:o,AbsoluteUrl:s},r=document.createDocumentFragment(),i=document.createElement("li"),a=document.createElement("a"),n=document.createTextNode(t.Name),a.appendChild(n),a.classList.add("dropdown-menu-on-hover"),a.href="/ikinci-el/"+t.AbsoluteUrl,a.onclick=function(){u.CommonHelperService.setDataLayer("Ilan Detay","Breadcrumb alt kategori","Click","gaEvent",!0),window.location.href=a.href},i.appendChild(a),i.classList.add("one-line-overflow"),r.appendChild(i),r);c.appendChild(l)}),r=!0):n()}).catch(n)};hoverintent(i,function(){c.classList.remove("dn"),r||o()},function(){c.classList.add("dn")}).options({timeout:199,interval:199})}}return i.factory=function(){var e=function(e,t,r){return new i(e,t,r)};return e.$inject=["$timeout","CommonHelperService","HttpHelperService"],e},i}(),r=document.body.parentNode.getAttribute("ng-app");angular.module(r).directive("breadcrumbDropdown",t.factory())}(arabam||(arabam={}));var __extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(e){var t=function(i){function e(e,t){var r=i.call(this,e,t)||this;return r.$http=e,r.DialogService=t,r}return __extends(e,i),e.$inject=["$http","DialogService"],e}((arabam||(arabam={})).HttpHelperService);angular.module("arabam").service("AuthenticationService",t)}();var arabam;__extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(e){var t=function(){},r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.LocationBase=t);e.ChildLocation=r;var i=function(){function e(e,t,r,i,a,n,o,s,l,c,u,p,d,h,m,g,f,v,y,w){this.$scope=e,this.CommonHelperService=t,this.DialogService=r,this.HttpHelperService=i,this.$sce=a,this.$compile=n,this.$timeout=o,this.$rootScope=s,this.$filter=l,this.CompareService=c,this.$location=u,this.$window=p,this.$q=d,this.LastSearchService=h,this.SwapOpsService=m,this.PrevNextService=g,this.ShowHideListingService=f,this.SearchService=v,this.FavoriteService=y,this.AnalyticsService=w,this.selectedFilterLimit=99,this.showFilterPopup=!1,this.showFilterPopupDetail=!1,this.firmDetailPage=0==window.location.pathname.indexOf("/galeri"),this.isUserLoggedIn=this.$rootScope.Properties.IsUserLoggedIn,this.isEmailRequired=this.$rootScope.Properties.IsEmailRequired,this.oneclick=!1,this.cities={},this.towns={},this.crumbToggleWrapper={},this.showSubIlText="İl",this.showSubIlceText="İlçe",this.dirtyCalc=!0,this.active=0,this.dirtyCalcTown=!0,this.activeTown=0,this.saveSearchObj={},this.comparables=[],this.dcomparables=[],this.compareAvailable=!0,this.showSearchLoading=!1,this.activeCategories=[],this.keywordSearchValue=[],this.showHideAvailable=!1,this.favoriteAvailable=!1,this.shellAdImpression=!1,this.radioData=[],this.init()}return e.prototype.init=function(){var r=this;r.$rootScope.saveQueryResult=!1,r.bindSegmentifyCallbacks(),r.bindSegmentifyCallbacksForLessTen(),document.body.classList.add("background2018"),window.Collect=window.Collect||null,r.hasLocalStorage=!!this.CommonHelperService.storageAvailable("localStorage"),r.isMobile=r.$rootScope.isMobile,r.setPopState(window.location.href),r.compareAvailable=r.CompareService.init(),r.compareAvailable&&(r.comparables=r.CompareService.getCarList(),r.prepareCompareListForSearch(r.CompareService.getCarList())),r.showHideAvailable=r.ShowHideListingService.init(),r.selectedFilters=r.selectedFilters||[],r.$scope.$on("deleteCarFromCompare",function(e,t){r.removeFromCompare(t.id)});var e=!!localStorage&&localStorage.getItem("scrollOnPageChangeByAdvertId");e&&(localStorage.removeItem("scrollOnPageChangeByAdvertId"),r.$timeout(function(){r.scrollIntoView(e)},170)),r.favoriteAvailable=r.FavoriteService.init(),r.ecommerceDataLayer()},e.prototype.quickSearch=function(){this.keyword&&(window.location.href="/ikinci-el?searchText="+this.keyword.replace(/ /g,"+"))},e.prototype.search=function(t,e){var r=this,i=r.$q.defer();if(this.showSearchLoading=!0,!(e&&(e.preventDefault(),e.ctrlKey&&t)))return this.SearchService.searchAndGetHtml(t).then(function(e){r.setHtml(e),r.setTitle(e,t),r.setPopState(t),r.refreshDfpAdverts(),r.showSearchLoading=!1,r.$window.smartAppBanner=t,i.resolve()}).catch(function(e){r.DialogService.warning({error:"Bir hata oluştu, lütfen tekrar deneyiniz"}),r.showSearchLoading=!1,i.reject()}),i.promise;window.open(t,"_blank")},e.prototype.searchFromPaging=function(t,e){var r=this;this.showSearchLoading=!0,e&&(e.preventDefault(),e.ctrlKey&&t)?window.open(t,"_blank"):this.SearchService.searchAndGetHtml(t).then(function(e){r.setHtml(e),r.setTitle(e,t),r.setPopState(t),r.refreshDfpAdverts(),r.showSearchLoading=!1,r.$window.smartAppBanner=t,$("html,body").animate({scrollTop:$("body").offset().top},400)}).catch(function(e){r.DialogService.warning({error:"Bir hata oluştu, lütfen tekrar deneyiniz"}),r.showSearchLoading=!1})},e.prototype.searchCategory=function(e,t){t&&t.preventDefault(),this.search(e,t).then(function(){window.segProducts()})},e.prototype.searchForms=function(e){var t=this;e&&e.preventDefault(),this.keywordSearchValue&&this.keywordSearchCallback();var r=this.SearchService.prepareSearchUrl(this.selectedFilters);this.search(r,e).then(function(){window.segProducts(),setTimeout(function(){t.scrollTopOfElementIntoViewport(".selected-filters-wrapper")},100)})},e.prototype.searchElement=function(e,t){if(void 0===t&&(t=!1),e){e=e.target;var r=this.getFilter(e);r.Modified=!0,"checkbox"==e.type.toLowerCase()?this.setInputElement(e,r):this.setTextElement(e,r),this.oneclick&&!t&&this.searchForms(null)}},e.prototype.setInputElement=function(e,t){e.checked?this.selectedFilters.push(t):this.removeFilter(t,!1)},e.prototype.setTextElement=function(e,t){var r=this.CommonHelperService.findInArray(this.selectedFilters,"PropertyName",e.name);-1<r?0==t.Value.length||"0"==t.Value?this.selectedFilters.splice(r,1):(this.selectedFilters[r]=t,this.selectedFilters[r].Value=e.getAttribute("data-checkModelVal")?e.attributes["data-checkModelVal"].value:e.value,this.selectedFilters[r].Text=this.CommonHelperService.toFriendlyUrl(e.value)):t.Value&&0<t.Value.length&&(0!=t.Value||"maxkm"==t.PropertyName)&&this.selectedFilters.push(t)},e.prototype.getFilter=function(e){return{Name:e.getAttribute("data-facetname")?e.attributes["data-facetname"].value:e.name,PropertyName:e.name,IsUrlFilter:!!e.getAttribute("data-urlfacet")&&"true"===e.getAttribute("data-urlfacet").toLowerCase(),Value:e.getAttribute("data-checkModelVal")?e.attributes["data-checkModelVal"].value:e.value,Text:this.CommonHelperService.toFriendlyUrl(e.value),DisplayName:e.getAttribute("data-displayname")?e.attributes["data-displayname"].value:e.value,HideFilter:!e.getAttribute("data-hidefilter")||e.attributes["data-hidefilter"].value}},e.prototype.isTownSetInCity=function(t){var e=this,r=this.selectedFilters.filter(function(e){return"town"==e.PropertyName}),i=[];return r.map(function(t){i=i.concat(e.townsAvailable.filter(function(e){return e.Value==t.Value}).map(function(e){return e.ParentName}))}),0<i.filter(function(e){return e==t}).length},e.prototype.clearTownsOfCity=function(t){var r=this;console.log(t,this.selectedFilters,this.townsAvailable),this.townsAvailable.filter(function(e){if(e.ParentName==t&&e.Selected)return e.Selected=!1,e}).map(function(e){var t=r.CommonHelperService.findInArray(r.selectedFilters,"Value",""+e.Value);r.selectedFilters.splice(t,1),e.Selected=!1}),r.searchForms(null)},e.prototype.clearAll=function(e){void 0===e&&(e=!1),this.removeFilters(),e||this.searchForms(null)},e.prototype.addFilter=function(e){this.selectedFilters.push(e)},e.prototype.removeFilter=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.selectedFilters=this.selectedFilters.filter(function(e){return e.Value!=t.Value}),"searchtext"==t.PropertyName.toLocaleLowerCase()&&(this.keywordSearchValue=null),r&&this.AnalyticsService.setDataLayer("Ilan Listeleme","Liste ust - Kriter silme","","gaEvent",!0),e&&this.searchForms(null)},e.prototype.removeFilters=function(){var t=this;t.selectedFilters.map(function(e){t[e.PropertyName]=null}),t.selectedFilters=[],t.keywordSearchValue=null},e.prototype.setPopState=function(r){var i=this;window.onpopstate=function(e){var t=window.location.href.replace(window.location.origin,"");(r=r.replace(window.location.origin,""))&&r!=t&&(-1<t.indexOf("/ilan/")?i.$window.location.href=t:i.search(window.location.href,null))}},e.prototype.prevNextDataReady=function(){var e=this;this.$timeout(function(){return e.setAdvertList()},0)},e.prototype.setAdvertList=function(){var e=this;e.PrevNextService.adverts=e.advertList,e.PrevNextService.currentPage=e.currentPage,e.PrevNextService.searchUrl=e.$location.url(),e.PrevNextService.totalPage=e.totalPage,e.PrevNextService.writeLocalStorage()},e.prototype.clearAdvertList=function(){this.PrevNextService.adverts=[],this.PrevNextService.currentPage=0,this.PrevNextService.totalPage=0,this.PrevNextService.writeLocalStorage()},e.prototype.setHtml=function(e,t,r){void 0===r&&(r=!0);var i=this.$sce.trustAsHtml(e),a=this.$sce.valueOf(i),n=$(a).find("#searchContainer");if(window.Collect&&n){var o=n.find("#collect");if(o&&0<o.length){var s=JSON.parse(o[0].value);window.Collect.send(s,"Impression")}}if(0<n.length){var l=$(".compare-tool"),c="";t?(c=$(t),"#searchContainer"!=t&&(n=$(n).find(t))):this.firmDetailPage?c=$("#searchContainer"):this.categoryPage||-1!=window.location.pathname.indexOf("ikinci-el")||-1!=window.location.pathname.indexOf("sifir-km")?c=$("#searchContainer"):$("#wrapper .content"),$(c).html(""),l.length,$(c).html(n.html()),this.adverts=window.recommendedAdverts,r&&this.$compile($("#searchContainer"))(this.$scope),this.setFooterHtml(e),this.callImageLazyLoad(),this.prepareFacetDataFromAjaxRequest(),this.prepareFilterDataFromAjaxRequest()}},e.prototype.setFooterHtml=function(e,t){void 0===t&&(t=!0);var r="#dynamic-footer-menu-container",i=this.$sce.trustAsHtml(e),a=this.$sce.valueOf(i),n=$(a).find(r);$(r).html(n.html()),t&&this.$compile($(r))(this.$scope)},e.prototype.refreshDfpAdverts=function(){try{window.googletag&&googletag.pubadsReady&&googletag.cmd.push(function(){googletag.pubads().refresh()})}catch(e){angular.noop()}},e.prototype.prepareFacetDataFromAjaxRequest=function(){var t=this;this.isMobile&&(this.facetData={},window.facets&&window.facets.map(function(e){"il"==e.FriendlyUrlName?(e.Items.map(function(e){e.Value=e.Id}),t.citiesAvailable=e.Items):"donanim"==e.FriendlyUrlName&&e.Items&&e.Items.map(function(e){t.facetData[e.FriendlyUrl]=e}),t.facetData[e.FriendlyUrlName]=e}))},e.prototype.prepareFilterDataFromAjaxRequest=function(){var t=this;this.isMobile&&window.ajaxFilters&&(this.selectedFilters=this.selectedFilters.filter(function(e){return"category"==e.PropertyName}),window.ajaxFilters.map(function(e){(-1<e.PropertyName.indexOf("min")||-1<e.PropertyName.indexOf("max"))&&(t[e.PropertyName]=e.Value)}),this.selectedFilters=this.selectedFilters.concat(window.ajaxFilters))},e.prototype.scrollIntoView=function(e){var t=document.getElementById("listing"+e);if(t){var r=$(t).offset().top,i=this.isMobile?r-65:r-10;$("html,body").stop().animate({scrollTop:i},330)}},e.prototype.setTitle=function(e,t){var r=/<title>(.*)<\/title>/g.exec(e),i=document.title;if(r&&0<r.length&&(i=r[1],document.title=i),(-1==(t=this.ensurePath(t)).indexOf(window.location.origin)?window.location.origin+(this.firmDetailPage?window.location.pathname:"")+t:t)!=window.location.href&&(this.$location.url(t),this.$location.replace(),this.$window.history.pushState({url:this.$location.absUrl()},i,this.$location.absUrl())),window.dataLayer){var a=this.firmDetailPage?"Galeri":"Search Results";window.dataLayer.push({event:"virtualPageviewListing",page:self.window.location.pathname,virtualPageURL:self.window.location.pathname,CD_Pagetype:a})}},e.prototype.createNewCategoryFacet=function(e){var a=this;this.categoryPage=!1,this.secondHandSearchPage=!0;var t=-1<this.queryString.indexOf("?")?this.queryString.substring(1):this.queryString;this.HttpHelperService.httpGet("/search/facets?id="+e+"&qs="+encodeURIComponent(this.queryString)+"&"+t,function(e){var t=a.$sce.trustAsHtml(e),r=a.$sce.valueOf(t),i=$("#ajax-categoryfacet-wrapper");$(r).appendTo(i),a.$compile($("#ajax-categoryfacet-wrapper"))(a.$scope),a.categoryFacetCount=$(".remove-filter-button").length},function(){console.log("error"),a.DialogService.warning({error:"Bir hata oluştu lütfen tekrar deneyiniz"})},{isNotLoading:!1})},e.prototype.callSubmitLater=function(e){var t=this;e.preventDefault(),this.searchElement(e),this.$timeout(function(){t.searchForms(e)})},e.prototype.keywordSearchEnterCallback=function(e,t){var r=this,i=this;if(10<i.keywordSearchValue.length&&i.keywordSearchValue.splice(10),e)e.preventDefault(),e.target.style.opacity="0",e.target.value=i.keywordSearchValue,e.target.name="searchText",i.searchElement(e);else{var a={target:document.createElement("input")};a.target.type="text",t&&i.keywordSearchValue.splice(i.keywordSearchValue.indexOf(t.text),1),a.target.value=i.keywordSearchValue?i.keywordSearchValue:"",a.target.setAttribute("data-facetname","Anahtar Kelime"),a.target.name="searchText",a.target.setAttribute("data-displayname",a.target.value),i.searchElement(a)}i.$timeout(function(){r.searchForms(e)},0)},e.prototype.keywordSearchCallback=function(){var e={target:document.createElement("input")};e.target.type="text",e.target.value=this.keywordSearchValue,e.target.setAttribute("data-facetname","Anahtar Kelime"),e.target.name="searchText",e.target.setAttribute("data-displayname",e.target.value),this.searchElement(e,!0)},e.prototype.saveUpdateQuery=function(e,t,r){var i=this;if(e.$invalid||!this.isUserLoggedIn)return!1;var a=this,n=!!(-1<window.location.pathname.indexOf("/panelim/")),o=$(".g-recaptcha-response").val(),s={};s={SearchQuery:t,NotifyAccepted:!!a.saveSearchObj.NotifyAccepted,Name:a.saveSearchObj.Name,GRecaptcha:o},a.saveSearchObj.NotifyAccepted&&a.saveSearchObj.IntervalDay&&(s.IntervalDay=a.saveSearchObj.IntervalDay),a.isEmailRequired&&a.saveSearchObj.NotifyAccepted&&a.saveSearchObj.Email&&(s.Email=a.saveSearchObj.Email);return this.HttpHelperService.httpPost("/favorite/save-search",s,function(e){e.Success?(i.DialogService.success({message:"Arama kriteriniz başarı ile kaydedilmiştir"}),n&&(window.location.href=window.location.href)):i.DialogService.warning(e.Message)}),!1},e.prototype.searchStringInUrl=function(e,t){var r=e.replace(" ","-").split("-");return-1<r.indexOf("yetkili")&&-1<r.indexOf("bayiden")&&"yetkili-bayiden"==t.replace(/ /g,"-")||(-1<r.indexOf("rent")&&-1<r.indexOf("a")&&-1<r.indexOf("car")&&"rent-a-car"==t.replace(/ /g,"-")||(-1<r.indexOf("yari")&&"yari-otomatik"==t||!(-1<r.indexOf("yari")&&"otomatik"==t)&&-1<r.indexOf(t,0)))},e.prototype.changeView=function(e){return this.CommonHelperService.setCookie("listingView",e,365),!0},e.prototype.changeSort=function(e){var t=window.location.href;t=e?this.CommonHelperService.updateQueryStringParameter(t,"sort",e):this.CommonHelperService.removeUrlParameter("sort"),t=this.CommonHelperService.removeUrlParameter("page",t),window.location.href=t},e.prototype.addSort=function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!0);var i=window.location.pathname+window.location.search;if(e){var a=this.CommonHelperService.getParameterByName("sort");if(a){var n=a.split("."),o=n[n.length-1];n.splice(0,n.length-1).join(".")!=e.toLowerCase()?"priceTl"==e?t&&(e+=".asc",i=this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):i=r?(e=e+"."+(o="desc"),this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):t?(e=e+"."+(o="asc"),this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):this.CommonHelperService.removeUrlParameter("sort"):i="desc"==o?t?(e=e+"."+(o="asc"),this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):this.CommonHelperService.removeUrlParameter("sort"):r?(e=e+"."+(o="desc"),this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):this.CommonHelperService.removeUrlParameter("sort")}else"priceTl"==e?t&&(e+=".asc",i=this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):i=r?(e+=".desc",this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):t?(e+=".asc",this.CommonHelperService.updateQueryStringParameter(i,"sort",e)):this.CommonHelperService.removeUrlParameter("sort");this.sorting=e}else i=this.CommonHelperService.removeUrlParameter("sort");i=this.CommonHelperService.removeUrlParameter("page",i),this.search(i,null)},e.prototype.addSortToGa=function(e){var t=this.CommonHelperService.getParameterByName("memberType");t||(t="List Title Sorting");var r=this.firmDetailPage?"Galeri Ilan Listeleme":"Ilan Listeleme";this.AnalyticsService.setDataLayer(r,t,e,"gaEvent",!0)},e.prototype.selectSortClass=function(e,t){var r=this.CommonHelperService.getParameterByName("sort");if(!r)return t?"":"dib";var i=r.split("."),a=i[i.length-1];return i.splice(0,i.length-1).join(",").toLowerCase()==e.toLowerCase()?a==t?"dib":"":t?"":"dib"},e.prototype.getSortIconClass=function(e){e=e.toLowerCase();var t=this.CommonHelperService.getParameterByName("sort");if(t&&t.split(".")[0]==e)return"color-red2018";return"color-grey2"},e.prototype.setCurrency=function(e){e||(e="TL"),this.selectedFilters=this.selectedFilters||[],-1==this.CommonHelperService.findInArray(this.selectedFilters,"PropertyName","currency")&&this.selectedFilters.push({PropertyName:"currency",Value:e,Text:e,Name:"Kur"})},e.prototype.changeCurrency=function(e){for(var t=0;t<this.selectedFilters.length;t++){"currency"==this.selectedFilters[t].PropertyName.toLowerCase()&&(this.selectedFilters[t].Value=e,this.selectedFilters[t].Text=e)}},e.prototype.editSavedSearchQueryCallBack=function(t){var r=this,e={SearchQuery:angular.fromJson(r.currentRequest),isMailApproved:this.$rootScope.Properties.IsMailApproved,isUserLoggedIn:this.$rootScope.Properties.IsUserLoggedIn,isTriggered:!!t&&t.isTriggered};e.SearchQuery&&(e.SearchQuery.QueryString=r.$window.location.search),e.SearchQuery&&(e.SearchQuery.BreadCrumb=r.activeCategories),t&&t.goto&&(e.goto=t.goto),t&&t.title&&(e.title=t.title),this.DialogService.editSavedAlert(e).then(function(e){t.isTriggered?r.AnalyticsService.setDataLayer("Ilan Listeleme","Aramayı Kaydet Auto Trigger Popup","Close","gaEvent",!0):r.AnalyticsService.setDataLayer("Ilan Listeleme","Aramayı Kaydet User Triggered Popup","Close","gaEvent",!0)})},e.prototype.callLoginDialog=function(e){this.DialogService.closeAll(),this.DialogService.callLogin({callBack:e})},e.prototype.sendToRealForm=function(){this.closeListingsPopupDetail(!1)},e.prototype.closeListingsPopupDetail=function(e){this.showFilterPopupDetail=e?!!e:!this.showFilterPopupDetail},e.prototype.sendSortingGACD=function(e){var t=this.CommonHelperService.getParameterByName("sort",e);switch(t){case"pricetl.asc":"Fiyata göre (Önce en ucuz)";break;case"pricetl.desc":"Fiyata göre (Önce en pahalı)";break;case"year.asc":"Model yılına göre (Önce en eski)";break;case"year.desc":"Model yılına göre (Önce en yeni)";break;case"startedat.desc":"Tarihe göre (Önce en yeni)";break;case"startedat.asc":"Tarihe göre (Önce en eski)";break;case"kilometers.asc":"Kilometreye göre (Önce en az)";break;case"kilometers.desc":"Kilometreye göre (Önce en çok)";break;default:"null"}},e.prototype.prepareSortFilter=function(e){var r=this,t=e.split("?");2==t.length&&t[1].split("&").map(function(e){var t=e.split("=");t&&2==t.length&&"sort"==t[0]&&"advanced"!=t[1]&&r.selectedFilters.push({PropertyName:"sort",Value:t[1],HideFilter:!0,IsUrlFilter:!1})})},e.prototype.setFilters=function(e){if(this.tempFilters=[],e)for(var t=0;t<e.length;t++)e[t].Value&&this.tempFilters.push(e[t])},e.prototype.pushFilters=function(){if(this.tempFilters)for(var e=0;e<this.tempFilters.length;e++)this.tempFilters[e].Value&&this.selectedFilters.push(this.tempFilters[e])},e.prototype.getCategoryFacetCount=function(){var e=0;if(this.selectedFilters&&0<this.selectedFilters.length)for(var t=this.selectedFilters.length-1;0<=t;t--)"category"==this.selectedFilters[t].PropertyName&&e++;return e},e.prototype.checkIfCategoryFacetExists=function(e){if(this.selectedFilters&&0<this.selectedFilters.length)for(var t=this.selectedFilters.length-1;0<=t;t--)if("category"==this.selectedFilters[t].PropertyName&&(this.selectedFilters[t].Value==e||this.selectedFilters[t].Id==e))return!0;return!1},e.prototype.getIndexOfCompare=function(e){return this.CompareService.getIndex(e)},e.prototype.toggleCompare=function(e,t){t&&t.preventDefault();var r=this;try{r.checkIfInCompare(e.id)?r.AnalyticsService.setDataLayer("Ilan Listeleme","Karşılaştırmadan Çıkar","Click","gaEvent",!0):r.AnalyticsService.setDataLayer("Ilan Listeleme","Karşılaştırmaya Ekle","Click","gaEvent",!0),r.CompareService.toggle(e)}catch(e){r.isMobile&&r.DialogService.warning({error:"En fazla 3 adet ilan karşılaştırabilirsiniz. Dilerseniz karşılaştırma adımına devam edebilir ya da eklediğiniz ilanlardan birini çıkartıp yeni bir ilan ekleyebilirsiniz.",title:"En Fazla 3 İlan Karşılaştırabilirsiniz"}),r.AnalyticsService.setDataLayer("Ilan Karşılaştırma","Ilan-Karsilastirma-Limit-Uyari","Alertbox","gaEvent",!0)}this.comparables=r.CompareService.getCarList(),this.prepareCompareListForSearch(r.CompareService.getCarList())},e.prototype.checkIfInCompare=function(e){return this.CompareService.checkIfInCompare(e)},e.prototype.removeFromCompare=function(e){this.CompareService.remove(e),this.comparables=this.CompareService.getCarList(),this.prepareCompareListForSearch(this.CompareService.getCarList())},e.prototype.prepareCompareListForSearch=function(e){var t=this;t.dcomparables=[],e.forEach(function(e){t.dcomparables[e.id]=!0})},e.prototype.ensurePath=function(e){return e=e.replace(window.location.origin,"")},e.prototype.callImageLazyLoad=function(){window.myLazyLoad?this.$timeout(function(){window.myLazyLoad.update()},100):window.LazyLoad&&this.$timeout(function(){new window.LazyLoad(window.lazyLoadOptions).update()},100)},e.prototype.toggleShowHide=function(e,t){t&&(t.stopPropagation(),t.preventDefault()),this.isHidden(e)?this.AnalyticsService.setDataLayer("Ilan Listeleme","Ilani goster","","gaEvent",!0):this.AnalyticsService.setDataLayer("Ilan Listeleme","Ilani gizle","","gaEvent",!0),this.ShowHideListingService.toggle(e)},e.prototype.isHidden=function(e){return this.ShowHideListingService.isHidden(e)},e.prototype.isFavorited=function(e){return this.FavoriteService.checkIfFavorited(e)},e.prototype.toggleFavorite=function(e,t){t&&(t.stopPropagation(),t.preventDefault()),this.isFavorited(e)?this.AnalyticsService.setDataLayer("Ilan Listeleme","Favoriden Cikar",""+e,"gaEvent",!0):this.AnalyticsService.setDataLayer("Ilan Listeleme","Favoriye Ekle",""+e,"gaEvent",!0),this.FavoriteService.toggleFavorite(e)},e.prototype.openEquipmentPopup=function(){var r=this;r.DialogService.openEquipmentPopup(r.facetData.donanim).then(function(e){e.value.Items&&e.value.Items.map(function(e){e.Childs.map(function(e){var t={Name:"eq",DisplayName:e.Displayname,IsUrlFilter:!1,Modified:!0,PropertyName:"eq",Text:e.Value,Value:e.Value};e.Selected?r.selectedFilters.push(t):r.removeFilter(t,!1)})}),r.searchForms(null)})},e.prototype.scrollBottomOfElementIntoViewport=function(e){var t=document.getElementById(e);t&&this.$timeout(function(){t.scrollIntoView(!1)},10)},e.prototype.scrollTopOfElementIntoViewport=function(e){var t="string"==typeof e?document.querySelector(e):e;t&&$("html,body").animate({scrollTop:$(t).offset().top-40},300)},e.prototype.checkCityChangedByClick=function(e){this.cities[e.FriendlyUrl]?this.cityChange(e):this.cityChangeRemove(e)},e.prototype.checkTownChangedByClick=function(e){this.towns[e.FriendlyUrl+e.Value]?this.townChange(e):this.townChangeRemove(e),this.selectedCitiesAsPlaceholder("towns")},e.prototype.selectedCitiesAsPlaceholder=function(e){var t=this,r=!("towns"!=e),i=[],a=r?"İlçe":" İl",n=r?$("#quick_search_ilce"):$("#quick_search_il");if(r)for(var o=0;o<t.townsAvailable.length;o++)t.townsAvailable[o].Selected&&i.push(t.townsAvailable[o].Name);else for(var s=0;s<t.citiesAvailable.length;s++)t.citiesAvailable[s].Selected&&i.push(t.citiesAvailable[s].Name);if(0==i.length)return n.attr("placeholder",a),void(t[r?"showSubIlceText":"showSubIlText"]=a);a=2<i.length?i.length+(r?" ilçe ":" il ")+"seçildi":1==i.length?i[0]:i[0]+", "+i[1],n.attr("placeholder",a),t[r?"showSubIlceText":"showSubIlText"]=a},e.prototype.cityChangeRemove=function(e,t){e.Selected=!1;var r=this.towns||null;if(r)for(var i in r)if(r.hasOwnProperty(i)){var a=r[i],n=i,o=/(\d+)/g,s=!!n.match(o),l=s?+n.match(o)[0]:n;if(a){var c=this.CommonHelperService.findInArray(this.townsAvailable,s?"Value":"FriendlyUrl",l);if(-1==c&&(c=this.CommonHelperService.findInArray(this.townsAvailable,s?"Value":"FriendlyUrl",""+l)),(!!this.townsAvailable[c]&&this.townsAvailable[c].ParentId+"")==e.Value+""){delete r[i],delete this.towns[i];var u=this.CommonHelperService.findInArray(this.selectedFilters,"Value",""+this.townsAvailable[c].Value);-1<u&&this.selectedFilters.splice(u,1)}}}if(0!=this.townsAvailable.length)for(var p=0;p<this.townsAvailable.length;p++)+this.townsAvailable[p].ParentId==+e.Value&&(this.townsAvailable.splice(p,1),p--);var d=this.CommonHelperService.findInArray(this.selectedFilters,"Value",e.Value.toString()),h=this.CommonHelperService.findInArray(this.selectedFilters,"Value",e.Value);if(-1<h||-1<d){var m=-1<d?d:h;this.selectedFilters.splice(m,1)}this.selectedCitiesAsPlaceholder(),!this.oneclick||t||this.searchForms(null)},e.prototype.cityChange=function(i){var a=this;this.addSelected("city",i,!0),this.HttpHelperService.httpGet("/widget/counties?cityId="+i.Value,function(e){a.townsAvailable=a.townsAvailable||[];for(var t=0;t<e.Data.length;t++){var r={Name:e.Data[t].Name,Value:""+e.Data[t].Id,Selected:!1,ParentName:a.CommonHelperService.toFriendlyUrl(i.Name),FriendlyUrl:a.CommonHelperService.toFriendlyUrl(e.Data[t].Name),ParentId:i.Value};a.townsAvailable.push(r)}a.selectedCitiesAsPlaceholder()},function(){alert("Bir hata oluştu, lütfen tekrar deneyiniz")},{isNotLoading:!0})},e.prototype.townChangeRemove=function(e){var t=this.CommonHelperService.findInArray(this.selectedFilters,"Value",e.Value);-1<t&&this.selectedFilters.splice(t,1),this.selectedCitiesAsPlaceholder("towns"),this.oneclick&&this.searchForms(null)},e.prototype.townChange=function(e){this.selectedCitiesAsPlaceholder("towns"),this.addSelected("town",e,!1)},e.prototype.addSelected=function(e,t,r){t.Selected=!0,this.selectedFilters.push({PropertyName:e,Value:t.Value||t.Id,IsUrlFilter:r,Text:t.FriendlyUrl||this.CommonHelperService.toFriendlyUrl(t.Name),Name:"city"==e?"Il":"Ilce",DisplayName:t.Name,HideFilter:!1}),this.oneclick&&this.searchForms(null)},e.prototype.filterKeyToggleTown=function(e){var t=this;27==e.keyCode?(t.quickSearchIlce="",t.dirtyCalcTown=!0,t.activeTown=0,e.target.blur(),e.preventDefault()):38==e.keyCode?t.checkKeyTown("up"):40==e.keyCode?t.checkKeyTown("down"):13==e.keyCode||32==e.keyCode?(e.preventDefault(),t.checkKeyTown("enter")):(t.dirtyCalcTown=!0,t.towns=t.towns||{},t.townsAvailable.forEach(function(e){e.Hovered=!1}),t.activeTown=0)},e.prototype.checkKeyTown=function(e){var t=this,r=t.quickSearchIlce?t.$filter("filter")(t.townsAvailable,t.quickSearchIlce):t.townsAvailable;if(r){if("enter"==e){var i=r[t.activeTown].FriendlyUrl+r[t.activeTown].Value;return t.towns[i]=!t.towns[i],void(t.towns[i]?t.townChange(r[t.activeTown]):t.townChangeRemove(r[t.activeTown]))}r.forEach(function(e){e.Hovered=!1}),"up"==e?(0==t.activeTown?t.activeTown=+(r.length-1):t.activeTown--,r[t.activeTown].Hovered=!0):"down"==e&&(t.activeTown==r.length-1?t.activeTown=0:t.dirtyCalcTown?t.dirtyCalcTown=!1:t.activeTown++,r[t.activeTown].Hovered=!0),$("#wBH_"+r[t.activeTown].FriendlyUrl+r[t.activeTown].Value).focus(),$("#quick_search_ilce").focus()}},e.prototype.getCityNameWithKey=function(t){var e="";if(this.citiesAvailable){var r=this.citiesAvailable.filter(function(e){return e.FriendlyUrl==t});r&&0<r.length&&(e=r[0].Name)}return e},e.prototype.bindSegmentifyCallbacks=function(){var a=this;window.segProducts=function(e,t,r){r&&r(jQuery("#no-result-segmentify"));var i=!1;t&&0<t.length&&(window.recommendedAdverts=t,i=!0),t&&0!=t.length||(t=window.recommendedAdverts),a.adverts=t,i&&a.$scope.$digest()}},e.prototype.bindSegmentifyCallbacksForLessTen=function(){var a=this;window.listingComplementary=function(e,t,r){r&&r(jQuery("#less-ten-segmentify"));var i=!1;t&&0<t.length&&(window.recommendedAdverts=t,i=!0),t&&0!=t.length||(t=window.recommendedAdverts),a.advertsForLessTen=t,i&&a.$scope.$digest()}},e.prototype.dataLayerClick=function(e,t){var r=window.adverts[t];window.dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:"Search Results"},products:[{name:r.Id?r.Id+" - "+r.CategoryName:r.CategoryName,id:r.Id?r.Id:null,price:r.FormattedPrice,brand:r.Brand,category:r.CategoryName,variant:r.Variant,list:"Search Results",position:parseInt(e)}]}}})},e.prototype.ecommerceDataLayer=function(){var e={ecommerce:{impressions:[]}};if(window.adverts&&0<window.adverts.length)for(var t=0;t<window.adverts.length;t++){var r=window.adverts[t];e.ecommerce.impressions.push({name:r.Id+" - "+r.CategoryName,id:r.Id,price:r.FormattedPrice,brand:r.Brand,category:r.CategoryName,list:"Search Results",position:r.Index})}window.dataLayer.push(e)},e.$inject=["$scope","CommonHelperService","DialogService","HttpHelperService","$sce","$compile","$timeout","$rootScope","$filter","CompareService","$location","$window","$q","LastSearchService","SwapOpsService","PrevNextService","ShowHideListingService","SearchService","FavoriteService","AnalyticsService"],e}();e.SearchControllerBase=i,angular.module("arabam").controller("SearchControllerBase",i)}(arabam||(arabam={})),function(e){var t=function(){function e(e,t,r){var i=this;this.CompareService=e,this.$rootScope=t,this.HttpHelperService=r,this.popupEl=null,this.toggleButton=null,this.isPopupVisible=!1,this.cars=[],this.differentCategoryError=!1,this.maxLimitError=!1,this.listenEvents=function(){i.$rootScope.$on("compareListChanged",function(){console.log("compareListChanged breadcrumbCompareController"),i.cars=i.CompareService.comparables,i.maxLimitError=i.CompareService.maxLimitError,i.showPopupForAWhile()}),i.$rootScope.$on("compareErrorCheck",function(){console.log("compareErrorCheck breadcrumbCompareController"),i.maxLimitError=i.CompareService.maxLimitError,i.differentCategoryError=i.CompareService.differentCategoryError,i.showPopupForAWhile()})},this.onClickOutside=function(e){var t=e.target;e.target!=i.toggleButton&&(i.popupEl.contains(t)||i.hidePopup())},this.init()}return e.prototype.init=function(){this.popupEl=document.getElementById("comparePopup"),this.toggleButton=document.getElementById("compareButton"),this.cars=this.CompareService.comparables,this.listenEvents()},e.prototype.togglePopup=function(e){this.isPopupVisible?this.hidePopup():this.showPopup()},e.prototype.showPopup=function(){this.popupEl.classList.add("show"),this.isPopupVisible=!0,document.addEventListener("click",this.onClickOutside,!1)},e.prototype.hidePopup=function(){this.popupEl.classList.remove("show"),this.isPopupVisible=!1,document.removeEventListener("click",this.onClickOutside,!1)},e.prototype.showPopupForAWhile=function(){var e=this;this.popupTimeout&&clearTimeout(this.popupTimeout),this.showPopup(),this.popupTimeout=setTimeout(function(){e.hidePopup()},18e4)},e.prototype.removeCarFromCompareList=function(e,t){e.stopPropagation(),e.preventDefault(),this.CompareService.remove(t)},e.prototype.clearList=function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.cars.forEach(function(e){t.CompareService.remove(e.id)})},e.prototype.goToCompareClicked=function(){if(1<this.cars.length){for(var e="",t=0;t<this.cars.length;t++){e=e+this.cars[t].id+(t<this.cars.length-1?"_":"")}window.location.href="/ilan/karsilastir/"+e}},e.$inject=["CompareService","$rootScope","HttpHelperService"],e}();angular.module("arabam").controller("breadcrumbCompareController",t)}(arabam||(arabam={})),function(e){var t=function(){function e(e,t){var r=this;this.HttpHelperService=e,this.$rootScope=t,this.popupEl=null,this.toggleButton=null,this.isPopupVisible=!1,this.favoriteList=null,this.isUserLoggedIn=!1,this.favoriteSearchLoading=!1,this.init=function(){r.popupEl=document.getElementById("favoritePopup"),r.toggleButton=document.getElementById("favSearchButton"),r.getMember()},this.getMember=function(){r.HttpHelperService.httpGet("/home/memberInfo?random="+(new Date).getTime(),function(e){e.Data&&(r.isUserLoggedIn=!0,r.$rootScope.$on("favoriteSearchListUpdated",function(){}))})},this.onClickOutside=function(e){var t=e.target;e.target!=r.toggleButton&&(r.popupEl.contains(t)||r.hidePopup())},this.init()}return e.prototype.togglePopup=function(e){this.isUserLoggedIn?this.isPopupVisible?this.hidePopup():this.showPopup():window.location.href="/uyelik?returnUrl="+window.location.pathname},e.prototype.showPopup=function(){document.addEventListener("click",this.onClickOutside,!1),this.popupEl.classList.add("show"),this.isPopupVisible=!0,this.fetchFavoriteSearches()},e.prototype.hidePopup=function(){document.removeEventListener("click",this.onClickOutside,!1),this.popupEl.classList.remove("show"),this.isPopupVisible=!1},e.prototype.showPopupForAWhile=function(){var e=this;this.popupTimeout&&clearTimeout(this.popupTimeout),this.showPopup(),this.popupTimeout=setTimeout(function(){e.hidePopup()},1500)},e.prototype.fetchFavoriteSearches=function(){var t=this;this.favoriteSearchLoading=!0,this.HttpHelperService.httpPost("/favorite/searchs",{Page:1,Take:40},function(e){t.favoriteSearchLoading=!1,t.favoriteList=e.Data.Documents.map(function(e){return{name:e.Name,url:e.Url}})},null,{isNotLoading:!0})},e.$inject=["HttpHelperService","$rootScope"],e}();angular.module("arabam").controller("breadcrumbFavoriteController",t)}(arabam||(arabam={})),function(e){function t(){var i=!1,a=0;window.addEventListener("scroll",function(){var e=document.getElementById("breadcrumbShell"),t=document.getElementById("js-hook-for-scroll-class-aab"),r=document.getElementById("js-hook-buy-now-container");t&&0<t.offsetHeight&&r&&0<r.offsetHeight?(a=t.offsetHeight+r.offsetHeight,e&&e.classList.add("auction-buyNow-on-page")):t&&0<t.offsetHeight?(a=t.offsetHeight,e&&e.classList.add("auction-on-page")):r&&0<r.offsetHeight&&(a=r.offsetHeight,e&&e.classList.add("buyNow-on-page")),!i&&e&&(window.requestAnimationFrame(function(){e.getBoundingClientRect().top<=a?e.classList.add("sticky"):e.classList.remove("sticky"),i=!1}),i=!0)})}(arabam||(arabam={})).initializeBreadcrumbSticky=t,window.configuration&&!window.configuration.IsMobile&&t()}(),function(e){var p,t;(t=p||(p={}))[t.Home=0]="Home",t[t.Detail=1]="Detail",t[t.List=2]="List";var r=function(){function e(e,t,r){var i=this;this.http=e,this.$scope=t,this.$element=r,this.WINDOW=window,this.collectRecommendationList=null,this.UserId=null,this.VisitorId=null,this.IsTestMember=!1,this.take=null,this.$scope.$watch("take",function(){i.init(t.take)}),this.$scope.$watch("Action",function(){var e={Category:"Recommendation",Action:t.Action,Label:"Impression_"+t.Action.toLowerCase(),event:"gaEvent"};"complete"===document.readyState?i.dataLayerAddWhenVisible(i.$element[0],e):window.addEventListener("load",function(){i.dataLayerAddWhenVisible(i.$element[0],e)})})}return e.prototype.init=function(e){var t=this;void 0===e&&(e=6),this.take=e,this.WINDOW.collectMemberInfo?this.prepareData(this.WINDOW.collectMemberInfo):window.addEventListener("collect-initialized",function(e){t.prepareData(e.detail)})},e.prototype.dataLayerAddWhenVisible=function(e,t){if("IntersectionObserver"in window){var r=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(console.log("COLLECT Element is fully visible in screen"),window.dataLayer.push(t),r.unobserve(e.target))})},{threshold:[.1]});e&&r.observe(e)}},e.prototype.prepareData=function(e){this.UserId=e.UserId,this.VisitorId=e.VisitorId,this.IsTestMember=e.IsTestMember,this.IsTestMember&&this.fetchData(this.UserId,this.VisitorId)},e.prototype.fetchData=function(e,t){var r=this;void 0===e&&(e=null),void 0===t&&(t=null);var i=this.WINDOW.collectData,a=new URLSearchParams(window.location.href),n=a.get("minYear")||null,o=a.get("minPrice")||null,s=null;i&&i.BreadCrumb&&(s=i.BreadCrumb);var l=null,c=null;i&&(n=i.Year,o=i.Price,l=i.Id,c=i.CategoryId);var u={UserId:e,VisitorId:t,pageType:p.List,take:this.take,categories:s,year:n,price:o,id:l,categoryId:c};this.http.get("https://collect.arabam.com/api/v1/recommendation/user-recommendation",{params:u}).then(function(e){e.data.Success&&e.data.Data.Adverts&&0<e.data.Data.Adverts.length&&(r.collectRecommendationList=e.data.Data.Adverts)})},e.$inject=["$http","$scope","$element"],e}();angular.module("arabam").controller("collectRecommendationController",r)}(arabam||(arabam={}));
//# sourceMappingURL=all.listing.min.js.map
